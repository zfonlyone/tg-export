# TG Export - Telegram 全功能导出工具 v1.5.0

📥 一键导出 Telegram 私密频道、群组、私聊的全部内容，支持 HTML + JSON 格式输出。

## ✨ v1.5.0 核心更新

### ⚡ 并行分块下载 (全新!)
- **单文件多连接并发**：大文件 (>10MB) 自动启用 4 连接并行下载
- **速度提升 3-8 倍**：基于 MTProto raw API，突破单连接限速
- **智能回退**：并行失败自动切换常规下载，保证稳定性
- **可配置连接数**：免费账号建议 3-4 连接，Premium 可提升至 6-8

### 🛑 暂停/挂起双模式
- **暂停 (Pause)**：释放槽位，Worker 去处理其他等待中的下载任务
- **挂起 (Suspend)**：驻留槽位，Worker 原地等待，降低实际总并发
- 支持批量完整性校验，自动标记不完整文件为失败

### 💾 断点续传强化
- 临时文件现存储于项目 `data/temp` 目录（宿主机 `/opt/tg-export/data/temp`）
- 容器重启后断点续传数据不再丢失
- 下载完成并通过完整性校验后才会移动到目标目录

### 🚀 极致性能与稳定性
- **真・并行下载**：多达 10 个线程真正**同时、高速**下载
- **智能状态恢复 (Instant Resume)**：容器重启后秒级恢复下载
- **零开销跳过**：基于状态记录跳过已完成文件

### 🎨 工业级 UI 进化
- **单文件百分比显示**：每个下载项现支持 **实时百分比数值展示**
- **暂停/挂起双按钮**：⏸ 暂停（释放槽位）/ ⏼ 挂起（驻留槽位）
- **批量校验按钮**：📊 一键校验所有已完成文件的完整性

---

## 🚀 一键部署

```bash
# 稳定版安装
bash <(curl -sL https://raw.githubusercontent.com/zfonlyone/tg-export/main/tg-export.sh)
```

---

## 🔁 下载与重试机制

| 错误类型 | 处理策略 |
|---------|----------|
| 连接中断 | 指数退避重试 (2s→4s→8s→...，最大60s) |
| 文件引用过期 | 重新获取消息刷新引用后重试 |
| 同名文件 | 递归设置 777 权限，支持同名目录 Overlay 覆盖更新 |
| 状态恢复 | 重启容器后自动将未完成项转回等待队列，按需自动重下 |

---

## 📜 许可证

MIT License
